cmake_minimum_required(VERSION 3.5.1)
project(pigeonwar)

include_directories(${CMAKE_SOURCE_DIR}/src)
include_directories(${CMAKE_SOURCE_DIR})

set(CMAKE_CXX_STANDARD 17)

set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake_modules" ${CMAKE_MODULE_PATH})

configure_file(config.h.in ${CMAKE_SOURCE_DIR}/config.h @ONLY)

if(WIN32)
    link_directories("${CMAKE_SOURCE_DIR}/lib")
endif()

if(UNIX)
    set(PLATFORM_LIBS pthread)
    set(BOOST_INCLUDEDIR "/home/abrdej/libraries/boost_1_66_0")
    set(BOOST_LIBRARYDIR "/home/abrdej/libraries/boost_1_66_0/stage/lib")
endif()

if (WIN32)
    set(BOOST_INCLUDEDIR "C:/local/boost_1_65_1/")
    set(BOOST_LIBRARYDIR "C:/local/boost_1_65_1/lib64-msvc-14.1")
    set(BOOST_ROOT "C:/local/boost_1_65_1/boost")
endif()

set(Boost_USE_STATIC_LIBS ON)
add_definitions(-DBOOST_ERROR_CODE_HEADER_ONLY)

include_directories(${Boost_INCLUDE_DIRS})

set(SOURCE_FILES
        src/core/module_holder.h
        src/entities/entity.h
        src/ai/ai.cpp
        src/ai/ai_manager.cpp
        src/abilities/claws.cpp
        src/core/board.cpp
        src/scenarios/creator_helper.cpp
        src/abilities/damage_dealers.h
        src/abilities/damage_dealer.cpp
        src/abilities/drain.cpp
        src/core/game.cpp
        src/abilities/grenade.cpp
        src/abilities/invisibility.cpp
        src/abilities/moveable.cpp
        src/core/turn_system.cpp
        src/abilities/tongue_of_fire.cpp
        src/core/game_controller.cpp
        src/abilities/shoot.cpp
        src/abilities/sabers.cpp
        src/core/path_finder.cpp
        src/managers/players_manager.cpp
        src/core/board.cpp
        src/scenarios/scenario_helper.h
        src/abilities/sword_blow.cpp
        src/abilities/sword_blow.h
        src/abilities/bludgeon.h
        src/abilities/bludgeon.cpp
        src/entities/poisoner.h
        src/abilities/poisoned_missile.cpp
        src/abilities/poisoned_missile.h
        src/scenarios/scenario_helper.h
        src/entities/samurai_rat.h
        src/entities/troll.h
        src/abilities/rage.cpp
        src/abilities/rage.h
        src/entities/droid.h
        src/abilities/laser.cpp
        src/abilities/laser.h
        src/abilities/teleport.cpp
        src/abilities/teleport.h
        src/abilities/wolf_herd.cpp
        src/abilities/wolf_herd.h
        src/abilities/dodge.cpp
        src/abilities/dodge.h
        src/entities/grenadier.h
        src/abilities/bomb.cpp
        src/abilities/bomb.h
        src/entities/destroyer.h
        src/abilities/armor.cpp
        src/abilities/armor.h
        src/abilities/blow_the_ax.cpp
        src/abilities/blow_the_ax.h
        src/entities/treant.h
        src/abilities/entangling.cpp
        src/abilities/entangling.h
        src/abilities/recovery.cpp
        src/abilities/recovery.h
        src/abilities/teleport.h
        src/abilities/wolf_herd.cpp
        src/abilities/wolf_herd.h
        src/abilities/dodge.cpp
        src/abilities/dodge.h
        src/entities/grenadier.h
        src/abilities/bomb.cpp
        src/abilities/bomb.h
        src/entities/destroyer.h
        src/abilities/armor.cpp
        src/abilities/armor.h
        src/abilities/blow_the_ax.cpp
        src/abilities/blow_the_ax.h
        src/entities/treant.h
        src/abilities/entangling.cpp
        src/abilities/entangling.h
        src/abilities/recovery.cpp
        src/abilities/recovery.h
        src/entities/rocket_thrower.h
        src/abilities/flame_thrower.cpp
        src/abilities/flame_thrower.h
        src/abilities/counterattack.cpp
        src/abilities/counterattack.h
        src/entities/guardian.h
        src/abilities/spear.cpp
        src/abilities/spear.h
        src/abilities/shield.cpp
        src/abilities/shield.h
        src/components/applied_effects.cpp
        src/components/applied_effects.h
        src/entities/creature.h
        src/abilities/chopper.cpp
        src/abilities/chopper.h
        src/abilities/spiral_of_fire.cpp
        src/abilities/spiral_of_fire.h
        src/entities/handthrower.h
        src/abilities/handcannon.cpp
        src/abilities/handcannon.h
        src/abilities/protection_field.cpp
        src/abilities/protection_field.h
        src/entities/warrior.h
        src/abilities/warrior_blow.cpp
        src/abilities/warrior_blow.h
        src/abilities/immortality.cpp
        src/abilities/immortality.h
        src/entities/robot.h
        src/abilities/spider_web.cpp
        src/abilities/spider_web.h
        src/entities/spider.h
        src/abilities/surroundings.cpp
        src/abilities/surroundings.h
        src/abilities/detonation.cpp
        src/abilities/detonation.h
        src/entities/sniper.h
        src/abilities/sniper_shot.cpp
        src/abilities/sniper_shot.h
        src/abilities/hypnosis.cpp
        src/abilities/hypnosis.h
        src/entities/monk.h
        src/abilities/magic_bullet.cpp
        src/abilities/magic_bullet.h
        src/abilities/jaw_spider.cpp
        src/abilities/jaw_spider.h
        src/abilities/long_range_missile.cpp
        src/abilities/long_range_missile.h
        src/entities/ninja.h
        src/abilities/interception.cpp
        src/abilities/interception.h
        src/entities/absorber.h
        src/abilities/absorption.cpp
        src/abilities/absorption.h
        src/abilities/power_circle.cpp
        src/abilities/power_circle.h
        src/abilities/shiruken.cpp
        src/abilities/shiruken.h
        src/abilities/assassin_slash.cpp
        src/abilities/assassin_slash.h
        src/abilities/assassin_slash.h
        src/entities/wretch.h
        src/abilities/vicious_circle.cpp
        src/abilities/vicious_circle.h
        src/abilities/wretch_moving.cpp
        src/abilities/wretch_moving.h
        src/abilities/kill.cpp
        src/core/bitmap_key.h config.h.in
        src/components/power_field.h
        src/abilities/possible_move_helper.h
        src/abilities/possible_move_helper.cpp
        src/abilities/abilities.h
        src/abilities/ability.h
        src/entities/wolf.h
        src/entities/werewolf.h
        src/entities/shooter.h
        src/entities/saurian.h
        src/entities/native.h
        src/entities/killer.h
        src/entities/giant.h

        src/effects/aura_of_immunity_effect.cpp
        src/effects/aura_of_immunity_effect.h
        src/effects/auras_observer.cpp
        src/effects/auras_observer.h

        src/server/server.h
        src/abilities/defender.cpp
        src/abilities/defender.h
        src/abilities/giant_blow.cpp
        src/abilities/giant_blow.h
        src/abilities/giant_ram.cpp
        src/abilities/giant_ram.h
        src/abilities/stone_skin.cpp

        src/abilities/stone_skin.h
        src/abilities/power_bullet.cpp
        src/abilities/power_bullet.h
        src/abilities/straight_target_ability.cpp
        src/abilities/straight_target_ability.h
        src/abilities/per_turn_usable.h
        src/server/sender.h
        src/server/sender.cpp
        src/abilities/neighboring_target_ability.h
        src/abilities/path_target_ability.h
        src/abilities/caster_target_ability.h
        src/abilities/prison_connection.cpp
        src/abilities/prison_connection.h
        src/abilities/killer_instinct.cpp
        src/abilities/killer_instinct.h
        src/abilities/aura_of_immunity.cpp
        src/abilities/aura_of_immunity.h
        src/components/modification.cpp
        src/components/modification.h
        src/abilities/ball_and_chain.cpp
        src/abilities/ball_and_chain.h
        src/abilities/death_mark.cpp
        src/abilities/death_mark.h
        src/components/damage_taker.cpp
        src/components/damage_taker.h
        src/components/damage_pack.h
        src/abilities/regeneration.cpp
        src/abilities/regeneration.h
        src/abilities/rocket_launcher.cpp
        src/abilities/rocket_launcher.h
        src/abilities/change_rocket_type.cpp
        src/abilities/change_rocket_type.h
        src/abilities/missile_of_doom.cpp
        src/abilities/missile_of_doom.h
        src/abilities/barrier.cpp
        src/abilities/barrier.h
        src/abilities/portal.cpp
        src/abilities/portal.h
        src/abilities/cure.cpp
        src/abilities/cure.h
        src/abilities/lightning.cpp
        src/abilities/lightning.h
        src/abilities/suck_the_soul.cpp
        src/abilities/suck_the_soul.h
        src/abilities/saw_passing.cpp
        src/abilities/saw_passing.h
        src/abilities/arrow.cpp
        src/abilities/arrow.h
        src/abilities/aura_of_destruction.cpp
        src/abilities/aura_of_destruction.h
        src/effects/aura_of_destruction_effect.cpp
        src/effects/aura_of_destruction_effect.h
        src/abilities/fist_of_doom.cpp
        src/abilities/fist_of_doom.h
        src/abilities/uselessness.cpp
        src/abilities/uselessness.h
        src/abilities/meteorite.cpp
        src/abilities/meteorite.h
        src/effects/web_effect.h
        src/effects/hypnosis_effect.h
        src/effects/base_effect.h
        src/effects/poison_effect.h
        src/entities/druid.h
        src/entities/soul_hunter.h
        src/entities/mechanical_saw.h
        src/entities/commander.h
        src/entities/gin.h
        src/entities/wizzard.h
        src/entities/combat_robot.h
        src/entities/golem.h
        src/entities/sorcerer.h
        src/entities/combat_robot.cpp
        src/entities/entities_factory.cpp
        src/entities/entities_factory.h
        src/entities/absorber.cpp
        src/utils/control_ptr.h
        src/utils/callback_holder.h
        src/utils/descriptions.h
        src/abilities/purification.cpp
        src/abilities/purification.h
        src/abilities/power_cost_ability.h
        src/scenarios/skirmish.cpp
        src/scenarios/skirmish.h
        src/scenarios/registered_entities.h
        src/scenarios/map_reader.cpp
        src/scenarios/map_reader.h
        src/messages/massages_makers.cpp
        src/messages/massages_makers.h
        src/entities/dragon.cpp
        src/entities/dragon.h
        src/abilities/dragon_skin.cpp
        src/abilities/dragon_skin.h
        src/abilities/flame_burning.cpp
        src/abilities/flame_burning.h
        src/abilities/hiding.cpp
        src/abilities/hiding.h
        src/abilities/mortar_thrower.cpp
        src/abilities/mortar_thrower.h
        src/utils/message_joiner.h
        src/core/board_container.h
        src/utils/graph.h
        src/utils/create_methods.h
        src/messages/from_to_json.h
        src/core/game_state.h
        src/core/states.h
        src/utils/for_each_in_tuple.h
        src/utils/logging.h
        src/components/health_field.h
        src/ai/behavior_tree.h
        src/entities/reaper.cpp
        src/entities/reaper.h
        src/abilities/charge.cpp
        src/abilities/charge.h
        src/entities/bomb_instance.cpp
        src/entities/bomb_instance.h
        src/abilities/repair.cpp
        src/abilities/repair.h
        src/entities/eye.cpp
        src/entities/eye.h
        src/abilities/transmission.cpp
        src/abilities/transmission.h
        src/abilities/eye_shoot.cpp
        src/abilities/eye_shoot.h
        src/scenarios/entities_reader.cpp
        src/scenarios/entities_reader.h
        src/scenarios/wolves_dinner.cpp
        src/scenarios/wolves_dinner.h
        src/scenarios/saurian_web_scenario.cpp
        src/scenarios/saurian_web_scenario.h
        src/scenarios/battle_with_a_golem_scenario.cpp
        src/scenarios/battle_with_a_golem_scenario.h
        src/server/server.cpp src/managers/get_entity_names.cpp
        src/managers/get_entity_names.h
        src/managers/get_entities.cpp
        src/managers/get_entities.h
        src/core/get_game_state.cpp
        src/core/get_game_state.h
        src/core/get_button_description.cpp
        src/core/get_button_description.h
        src/scenarios/total_destruction.cpp
        src/scenarios/total_destruction.h src/entities/spectre.cpp src/entities/spectre.h src/abilities/cleaver.cpp src/abilities/cleaver.h src/abilities/havoc.cpp src/abilities/havoc.h src/abilities/immateriality.cpp src/abilities/immateriality.h src/scenarios/dark_forest.cpp src/scenarios/dark_forest.h src/entities/pixie.cpp src/entities/pixie.h src/abilities/poke.cpp src/abilities/poke.h src/entities/shooter.cpp src/core/get_effect_description.cpp src/core/get_effect_description.h src/entities/destroyer.cpp src/entities/warrior.cpp src/entities/sorcerer.cpp src/utils/algorithm.h src/entities/guardian.cpp src/entities/native.cpp src/entities/saberhand.cpp src/entities/saurian.cpp src/entities/saurian_web.cpp src/entities/commander.cpp src/entities/rocket_thrower.cpp src/entities/environment.cpp src/entities/environment.h)

add_executable(pigeonwar_server src/main.cpp ${SOURCE_FILES})
target_link_libraries(pigeonwar_server ${PLATFORM_LIBS})
